{% extends "_layout" %}

{% block content %}
{% paginate craft.entries.section('blog').limit(blogSettings.postsPerPage) as info, entries %}
<div id="articleContainer">
  {% for entry in entries %}
  <article class="">
    <header>
      {% set categories = craft.categories.relatedTo(entry).level(1).limit(1) %}
      {% for category in categories %}
      <a href="{{ category.url }}"><h3>{{ category.title }} kategoria</h3></a>
      {% endfor %}
      <a href="{{ entry.url }}"><h1>{{ entry.title }}</h1></a>
      <h2>{{entry.blogiSubTittle}}</h2>
      <time>{{ entry.postDate | date("m.d.Y") }}</time>
    </header>
    <a href="{{ entry.url }}">
      {% if entry.featuredImage | length %}
        {% set featuredImage = "" %}
        {% set img_transform = {
          mode: 'fit',
          width: 600
        } %}
        {% for asset in entry.featuredImage %}
          {% set featuredImage = asset.getUrl(img_transform) %}
        {% endfor %}
        <img class="img-fluid" src="{{featuredImage}}" alt="{{entry.title}}">
      {% endif %}
    </a>
    {% set paragraphs = entry.body|split('</p>') %}
    {% set teaser = paragraphs|first ~ '</p>' %}
    {{ teaser|raw }}
  </article>
  {% endfor %}
  {% if info.prevUrl %}
  <a href="{{info.prevUrl}}" class="underline_from_right">&larr; Previous Page</a>
  {% endif %}
  {% if info.nextUrl %}
  <a href="{{info.nextUrl}}" class="underline_from_left">Next Page &rarr;</a>
  {% endif %}
</div>
{% endblock %}
